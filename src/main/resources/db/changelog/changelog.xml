<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.31.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1758578548375-1" author="HP">
        <createSequence incrementBy="50" sequenceName="event_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1758578548375-2" author="HP">
        <createSequence incrementBy="50" sequenceName="member_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1758578548375-3" author="HP">
        <createSequence incrementBy="50" sequenceName="notification_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1758578548375-4" author="HP">
        <createSequence incrementBy="50" sequenceName="repayment_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1758578548375-5" author="HP">
        <createTable tableName="contribution">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_contribution"/>
            </column>
            <column name="contribution_type" type="VARCHAR(255)"/>
            <column name="payment_date" type="DATE"/>
            <column name="amount" type="DECIMAL"/>
            <column name="balance" type="DECIMAL"/>
            <column name="payment_mode" type="VARCHAR(255)"/>
            <column name="payment_proof" type="VARCHAR(255)"/>
            <column name="member_id" type="BIGINT"/>
            <column name="contribution_period_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-6" author="HP">
        <createTable tableName="contribution_members">
            <column name="contribution_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="member_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-7" author="HP">
        <createTable tableName="contribution_period">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_contribution_period"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="individual_amount" type="DECIMAL"/>
            <column name="start_date" type="DATE"/>
            <column name="end_date" type="DATE"/>
            <column name="active" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-8" author="HP">
        <createTable tableName="event">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_event"/>
            </column>
            <column name="category" type="VARCHAR(255)"/>
            <column name="amount" type="DECIMAL"/>
            <column name="event_date" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-9" author="HP">
        <createTable tableName="event_members">
            <column name="event_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="members_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-10" author="HP">
        <createTable tableName="loan">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_loan"/>
            </column>
            <column name="amount" type="DECIMAL"/>
            <column name="duration" type="INT"/>
            <column name="begin_date" type="DATETIME"/>
            <column name="repayment_amount" type="DECIMAL"/>
            <column name="end_date" type="DATETIME"/>
            <column name="is_repaid" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="member_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-11" author="HP">
        <createTable tableName="loan_request">
            <column autoIncrement="true" name="id_loan_request" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_loan_request"/>
            </column>
            <column name="request_amount" type="DECIMAL">
                <constraints nullable="false"/>
            </column>
            <column name="duration" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="reason" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="is_repaid" type="BOOLEAN"/>
            <column name="request_date" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="member_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-12" author="HP">
        <createTable tableName="member">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_member"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="password" type="VARCHAR(255)"/>
            <column name="npi" type="VARCHAR(255)"/>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="role" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-13" author="HP">
        <createTable tableName="notification">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_notification"/>
            </column>
            <column name="msg" type="VARCHAR(255)"/>
            <column name="send_date" type="DATETIME"/>
            <column name="event_date" type="DATETIME"/>
            <column name="receiver" type="VARCHAR(255)"/>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="role" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-14" author="HP">
        <createTable tableName="repayment">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_repayment"/>
            </column>
            <column name="amount" type="DECIMAL"/>
            <column name="duration" type="INT"/>
            <column name="reason" type="VARCHAR(255)"/>
            <column name="status" type="VARCHAR(255)"/>
            <column name="repayment_date" type="DATE"/>
        </createTable>
    </changeSet>
    <changeSet id="1758578548375-15" author="HP">
        <addForeignKeyConstraint baseColumnNames="contribution_period_id" baseTableName="contribution"
                                 constraintName="FK_CONTRIBUTION_ON_CONTRIBUTION_PERIOD" referencedColumnNames="id"
                                 referencedTableName="contribution_period"/>
    </changeSet>
    <changeSet id="1758578548375-16" author="HP">
        <addForeignKeyConstraint baseColumnNames="member_id" baseTableName="contribution"
                                 constraintName="FK_CONTRIBUTION_ON_MEMBER" referencedColumnNames="id"
                                 referencedTableName="member"/>
    </changeSet>
    <changeSet id="1758578548375-17" author="HP">
        <addForeignKeyConstraint baseColumnNames="id" baseTableName="loan" constraintName="FK_LOAN_ON_ID"
                                 referencedColumnNames="id" referencedTableName="repayment"/>
    </changeSet>
    <changeSet id="1758578548375-18" author="HP">
        <addForeignKeyConstraint baseColumnNames="member_id" baseTableName="loan" constraintName="FK_LOAN_ON_MEMBER"
                                 referencedColumnNames="id" referencedTableName="member"/>
    </changeSet>
    <changeSet id="1758578548375-19" author="HP">
        <addForeignKeyConstraint baseColumnNames="member_id" baseTableName="loan_request"
                                 constraintName="FK_LOAN_REQUEST_ON_MEMBER" referencedColumnNames="id"
                                 referencedTableName="member"/>
    </changeSet>
    <changeSet id="1758578548375-20" author="HP">
        <addForeignKeyConstraint baseColumnNames="contribution_id" baseTableName="contribution_members"
                                 constraintName="fk_conmem_on_contribution" referencedColumnNames="id"
                                 referencedTableName="contribution"/>
    </changeSet>
    <changeSet id="1758578548375-21" author="HP">
        <addForeignKeyConstraint baseColumnNames="member_id" baseTableName="contribution_members"
                                 constraintName="fk_conmem_on_member" referencedColumnNames="id"
                                 referencedTableName="member"/>
    </changeSet>
    <changeSet id="1758578548375-22" author="HP">
        <addForeignKeyConstraint baseColumnNames="event_id" baseTableName="event_members"
                                 constraintName="fk_evemem_on_event" referencedColumnNames="id"
                                 referencedTableName="event"/>
    </changeSet>
    <changeSet id="1758578548375-23" author="HP">
        <addForeignKeyConstraint baseColumnNames="members_id" baseTableName="event_members"
                                 constraintName="fk_evemem_on_member" referencedColumnNames="id"
                                 referencedTableName="member"/>
    </changeSet>

</databaseChangeLog>